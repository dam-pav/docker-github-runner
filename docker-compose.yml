version: "3.8"

services:
  github-runner:
    image: ghcr.io/dam-pav/github-runner:latest

    container_name: ${RUNNER_NAME}

    environment:
      REPO_URL: ${REPO_URL}
      GITHUB_TOKEN: ${GITHUB_TOKEN}
      RUNNER_NAME: ${RUNNER_NAME}
      RUNNER_LABELS: ${RUNNER_LABELS}

    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      # Optional: mount a host credentials file. If present and contains a
      # GITHUB_TOKEN entry, the container will use that value (file takes
      # priority over the GITHUB_TOKEN environment variable).
      - /etc/github-runner/credentials:/run/secrets/github-runner:ro

    restart: unless-stopped
